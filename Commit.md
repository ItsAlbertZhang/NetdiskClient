# 提交历史

### V 4.0 alpha

#### 2205151552

- 移植通用功能 (lib 部分).

- 客户端能够与服务端建立连接.

- 客户端能够与服务端进行简单的消息通信, 但详细的通信协议尚未完善.

##### 2205151913

- 移植 rsa 密钥功能, 实现 RSA 结构体与字符串之间的相互转换.

##### 2205161120

- 移植初始化 rsa 密钥功能, 并额外添加对本地存储的服务端公钥检查.

##### 2205161121

- 更新部分代码注释

##### 2205161225

- 更新 thread_main 主线程处理函数, 完成流程构建.

### V 4.1 alpha

#### 2205161709

- 移植 epoll 监听功能, 监听对象为 stdin 与 connect_fd, 以便得知服务端断开连接的行为.

- 实现下发验证请求的功能.

##### 2205161718

- 修复在下发验证请求处理过程中确认码未保存的问题.

### V 4.2 alpha

#### 2205171930

- 实现注册功能.

- 统一服务端/客户端在实现通信功能的核心代码上的格式与风格.

#### 2205191251

- 实现 CONNINIT 消息对 DUPCONN 消息的兼容, 现在 CONNINIT 消息会交换 token 信息, 为 DUPCONN 消息做准备.

#### 2205191641

- 基本实现登录功能.

#### 2205191704

- 完善登录功能与注册功能. 现在登录与注册均有两种途径, 一种是直接输入 `register/login username pwd`, 另一种是输入 `register/login` 后再根据程序提示输入用户名和密码.

#### 2205191929

- 初步实现拷贝连接功能.

  - 目前仅可在超时断连的情况下, 手动在客户端输入 dup 执行重新连接. 在已连接的情况下拷贝连接尚未实现.

  - 客户端待实现在断连情况下自动连接. 尤其注意要考虑在执行命令的过程中超时断连的情况.

  - 服务端待实现在已连接情况下的拷贝连接.

  - 服务端待实现自动清理. 目前的设想为: 超时断连放入休眠队列, 而对方主动断连则直接断开.

##### 2205201045

- 调整部分文件结构.

#### 2205201320

- 实现了拷贝连接的基本功能.

  - 客户端在使用拷贝连接功能时, 会新拉起一个连接并向服务器发出请求. 如果客户端已被断开连接, 则其会自动将新拉起的连接作为主线程通信连接使用.

  - 客户端在已断开连接的情况下执行命令时, 会在命令被执行前自动发起拷贝连接, 以恢复主线程通信环境. 该功能已向后兼容.

  - 客户端依旧可以手动发起拷贝连接. 

  - 服务端在接收到拷贝连接请求时, 会自动判断对端是想恢复已休眠的连接, 还是想拷贝一个现有的连接, 并根据判断结果, 从已休眠连接链表或现有连接哈希表中恢复该连接的工作环境.

  - 客户端主动断开时, 服务器会直接将该连接直接清除. 只有在服务端超时自动断开客户端连接时, 才会将该连接放入休眠队列.

  - 服务端的自动(或定时)清理尚未实现.

- 客户端将 program_stat 指针作为全局变量处理, 不再将其在函数之间传递. 所有涉及到以 program_stat 为参数的函数均做有相应调整.

##### 2205211050

- 修改了部分变量名, 使项目结构更清晰.